# Overview

The purpose of this document is to give an overview of the Dialtone Combinator project and
help provide context for any contributors wanting to work on the project.

If you are looking for documentation to implement Dialtone Combinator in an external project please see
[USAGE](USAGE.md).

## Documentation

### Organizational

Documentation for maintaining the project.

[README](/README.md) \
[CONTRIBUTING](CONTRIBUTING.md) \
[RELEASING](RELEASING.md) \
[COMMIT_CONVENTION](COMMIT_CONVENTION.md) \
[FUTURE_ADDITIONS](FUTURE_ADDITIONS.md) \
[KNOWN_ISSUES](KNOWN_ISSUES.md) \

### Internal

Documentation that describes the system architecture in-depth.

[SYSTEM](internal/SYSTEM.md) \
[RENDERER](internal/RENDERER.md) \
[OPTION_BAR](internal/OPTION_BAR.md) \
[CODE_PANEL](internal/CODE_PANEL.md)
[CONTROLS](internal/CONTROLS.md)

### External

Documentation instructing how to implement into external projects.

[USAGE](USAGE.md)

## Terminology
<pre style="line-height: 2.5em;">
  <b>Root:</b> The root level component in 'combinator.vue'
  <b>Preview:</b> The preview app in 'app.vue'
  <b>Member:</b> An identifiable element of a component (Prop, attribute, slot, event)
  <b>Binding:</b> A member that is bound to the component with `v-bind` (Prop, attribute)
  <b>Attribute:</b> An HTML attribute
  <b>Documentation:</b> The raw data generated by docgen
  <b>Information / Info:</b> The central data object containing extended documentation data after parsing and processing
  <b>Options:</b> The central data object containing key-value pairs for members and their values
  <b>Control:</b> A control used for manipulating a value, usually a member value
  <b>Target Component:</b> The component the combinator is using
</pre>

## Folder Structure
<pre style="line-height: 2.5em;">
  <b>/</b> Root project folder, primarily containing configuration files 

  <b>/.github</b> The folder containing documentation and special GitHub files

  <b>/dist</b> The local folder that contains the library and preview build output

  <b>/public</b> The folder containing publicly accessible files for the preview app

  <b>/src</b> The folder containing all internal project files

  <b>⎣__/assets</b> The folder containing general assets and styling for vue

  <b>⎣__/components</b> The root component folder that contains the root component ('Combinator.vue')
  <b>⎣____/code_editor</b> The folder containing components for the code editor
  <b>⎣____/code_panel</b> The folder containing components for the code panel
  <b>⎣____/controls</b> The folder containing individual control components
  <b>⎣____/event_console</b> The folder containing components for the event console
  <b>⎣____/option_bar</b> The folder containing components for the code editor
  <b>⎣____/renderer</b> The folder containing components for the renderer

  <b>⎣__/lib</b> The main library folder for files containing utility functions in plain js

  <b>⎣__/variants</b> The folder containing variants for specific components for the 'variantBank' export
</pre>

## Root System

The Dialtone Combinator consists of three main components:
* Renderer
* Option bar
* Code panel

The Dialtone Combinator uses two main data objects:
* Info
* Options

Data central to the system is stored in the root component and is communicated between child components.
The system is designed with reactivity and extensibility in mind.

The settings data object is also used to dictate global settings for the combinator.

See [SYSTEM](internal/SYSTEM.md)

## Supported Components

Currently, not all Dialtone Vue components are working with the Combinator.

A supported component is a component that is intended to be working with full functionality in the Combinator.

Supported components are listed in [supported_components.json](/src/supported_components.json).
These components are used by various tests to ensure they are working and future updates do not break them.

When adding a new component to this list make sure it is working with all tests afterwards.

## Docgen

Documentation generated from the
[dialtone-vue](https://github.com/dialpad/dialtone-vue)
project is used to obtain extended information about the target components.
This documentation is currently generated by the
[vue-docgen-api](https://vue-styleguidist.github.io/docs/Docgen.html#api)
which creates data based on code comments with the format indicated in the 'Vue Styleguidist'
[Documenting components](https://vue-styleguidist.github.io/docs/Documenting.html#code-comments)
section.

### Usage

Essential generated data that is used by the Combinator:
* Code comments and tags
    * Props
    * Slots
    * Emits
* Default values
* Valid values
* Valid types
* ...

### Custom Tags

Custom tags are required by the combinator to generate some additional documentation for the components.

#### Attribute

Used to indicate custom members that should be generated for HTML attributes.

Format:
```
@property {TYPE} NAME attribute
```

Example:
```js
/**
 * Base Vue component for Dialtone Buttons.
 * @displayName DtButton
 * @property {Boolean} disabled attribute
 * @property {String} width attribute
 */
export default {
  name: 'DtButton',
  ...
}
```
_Tags for disabled and width attributes on button component_

Attributes should only ever be of type 'Boolean' or 'String' based on the
[Mozilla reference](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes).

#### Model

Used to indicate the member is used in v-model, the reason is twofold:
* Apply a custom badge to the member in the option bar
* Docgen implicitly changes the name of the member if it is a prop to 'v-model'

Format:
```
@model PROP
```

Example:
```
/**
 * The value of the input
 * @model value
 */
value: {
  type: [String, Number, Boolean, Object],
  default: null,
},
```

The name of the prop is indicated in the model tag, so it can be changed back to its original name.
This was being implemented at one point, however the
[pull request](https://github.com/vue-styleguidist/vue-styleguidist/pull/1056)
went stale and has closed.
